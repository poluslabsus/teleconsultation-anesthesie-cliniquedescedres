<!DOCTYPE html> 
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Teleconsultation Anesthesie Clinique des Cedres</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --primary-text: #0d1938;
            --body-text: #1f2933;
            --button-bg: #0b2f6a;
            --button-bg-hover: #0d3b85;
            --button-text: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                         "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background: #ffffff;
            color: var(--body-text);
        }

        .header-container {
            width: 100%;
            text-align: center;
            margin-top: 40px;
        }

        .titre-site {
            color: var(--primary-text);
            font-size: 46px;
            font-weight: 700;
            margin: 0;
            display: inline-block;
            position: relative;
            padding-bottom: 10px;
        }

        .titre-site::after {
            content: "";
            display: block;
            width: 100px;
            height: 4px;
            background-color: var(--primary-text);
            margin: 10px auto 0 auto;
            border-radius: 3px;
        }

        .sous-titre {
            font-size: 40px;
            color: var(--primary-text);
            font-weight: 700;
            margin-top: 15px;
            margin-bottom: 30px;
        }

        main {
            max-width: 800px;
            margin: 20px auto 40px auto;
            background: #ffffff;
            padding: 20px;
            border: 2px solid black;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        }

        .encadre-tele {
            background: #eeeeee;
            border-radius: 8px;
            padding: 15px;
            color: var(--body-text);
            font-size: 17px;
            text-align: left;
            margin-bottom: 20px;
        }

        section {
            margin-bottom: 40px;
        }

        h2 {
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
            text-align: center;
            color: var(--primary-text);
        }

        #resultat {
            text-align: center;
        }

        .button {
            display: inline-block;
            padding: 10px 18px;
            margin-top: 10px;
            border-radius: 8px;
            border: none;
            background: var(--button-bg);
            color: var(--button-text);
            text-decoration: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .button:hover {
            background: var(--button-bg-hover);
        }

        .question {
            margin-bottom: 20px;
        }

        .question p {
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--primary-text);
        }

        label {
            margin-right: 15px;
        }

        .centered {
            text-align: center;
            margin-top: 20px;
        }

        .encadre {
            background: #eeeeee;
            border-radius: 8px;
            padding: 15px;
            color: var(--body-text);
            text-align: center;
            margin-top: 20px;
        }

        .encadre .titre-encadre {
            font-weight: bold;
            margin-bottom: 10px;
            margin-top: 15px;
            color: var(--primary-text);
        }

        .encadre .texte-encadre {
            font-weight: normal;
        }
    </style>
</head>
<body>

    <div class="header-container">
        <h1 class="titre-site">
            Cabinet d'anesthésie de la clinique des Cèdres
        </h1>
        <div class="sous-titre">Espace Téléconsultation</div>
    </div>

    <main>

        <div class="encadre-tele">
            Vous souhaitez réaliser votre consultation d'anesthésie en Téléconsultation : 
            c'est à dire à distance via un logiciel dédié sécurisé.<br><br>
            La Téléconsultation n'est pas une obligation c'est un souhait de votre part 
            et une possibilité que nous proposons si vous êtes éligible.
        </div>

        <section id="questionnaire">
            <h2>
                Questionnaire : Merci de répondre à TOUTES les questions pour savoir 
                si c'est possible pour vous ou pas.
            </h2>

            <form id="questionnaire-form">

                <!-- Q1 : visible dès l'ouverture -->
                <div class="question" id="bloc-q1">
                    <p>1. Avez-vous plus de <b>70 ans</b> ?</p>
                    <label><input type="radio" name="q1" value="oui"> Oui</label>
                    <label><input type="radio" name="q1" value="non"> Non</label>
                </div>

                <!-- Q2 : intervention -->
                <div class="question" id="bloc-q2">
                    <p>2. Sélectionnez votre intervention :</p>
                    <select name="q3" id="q3">
                        <option value="">-- Sélectionnez votre intervention --</option>
                        <option value="cystectomie">Cystectomie</option>
                        <option value="bricker">Bricker</option>
                        <option value="duodenopancreatectomie">Duodenoprancréatectomie</option>
                        <option value="pancreatectomie">Pancréatectomie</option>
                        <option value="gastrectomie">Gastrectomie</option>
                        <option value="colectomie">Colectomie</option>
                        <option value="hepatectomie">Hépatectomie</option>
                        <option value="splenectomie">Splénectomie</option>
                        <option value="pth-pth">Prothèse Totale de Hanche</option>
                        <option value="ptg-ptg">Prothèse Totale de Genou</option>
                        <option value="pte">Prothèse Totale d'Épaule</option>
                        <option value="hysterectomie">Hystérectomie</option>
                        <option value="osteotomie-bimaxillaire">Ostéotomie BiMaxillaire</option>
                        <option value="osteotomie-mandibulaire">Ostéotomie Mandibulaire</option>
                        <option value="laryngectomie">Laryngectomie</option>
                        <option value="cervicotomie">Cervicotomie</option>
                        <option value="parotidectomie">Parotidectomie</option>
                        <option value="catheterisme-voies-biliaires">Cathétérisme des voies biliaires</option>
                        <option value="dissection-sous-muqueuse-gastrique">Dissection sous-muqueuse gastrique</option>
                        <option value="dissection-sous-muqueuse-colique">Dissection sous-muqueuse colique</option>
                        <option value="mucosectomie-gastrique">Mucosectomie gastrique</option>
                        <option value="mucosectomie-colique">Mucosectomie colique</option>
                        <option value="mastectomie-affirmation-genre">Mastectomie d'affirmation de genre</option>
                        <option value="autre">Mon intervention n'est pas dans cette liste</option>
                    </select>
                </div>

                <!-- Q3 : mineur -->
                <div class="question" id="bloc-q3">
                    <p>3. Êtes-vous mineur ?</p>
                    <label><input type="radio" name="q2" value="oui"> Oui</label>
                    <label><input type="radio" name="q2" value="non"> Non</label>
                </div>

                <!-- Q4 : anticoagulants -->
                <div class="question" id="bloc-q4">
                    <p>
                        4. Prenez-vous des traitements anticoagulants ou 
                        anti-aggrégants plaquettaires ?
                        <br><br>
                        <i style="font-weight: normal;">
                        (Aspirine, Resitune, Kardegic, Plavix, Clopidogrel, Xarelto, 
                        Rivaroxaban, Eliquis, Apixaban, Pradaxa, Dabigatran, 
                        Antivitamine K, Previscan, Fluindione, Coumadine, Warfarine, 
                        Sintrom, Acenocoumarol)
                        </i>
                    </p>
                    <label><input type="radio" name="q4" value="oui"> Oui</label>
                    <label><input type="radio" name="q4" value="non"> Non</label>
                </div>

                <!-- Q5 -->
                <div class="question" id="bloc-q5">
                    <p>5. Avez-vous une connexion internet permettant une visio ?</p>
                    <label><input type="radio" name="q5" value="oui"> Oui</label>
                    <label><input type="radio" name="q5" value="non"> Non</label>
                </div>

                <!-- Q6 -->
                <div class="question" id="bloc-q6">
                    <p>6. Avez-vous une webcam fonctionnelle ?</p>
                    <label><input type="radio" name="q6" value="oui"> Oui</label>
                    <label><input type="radio" name="q6" value="non"> Non</label>
                </div>

                <!-- Q7 -->
                <div class="question" id="bloc-q7">
                    <p>7. Avez-vous un microphone fonctionnel ?</p>
                    <label><input type="radio" name="q7" value="oui"> Oui</label>
                    <label><input type="radio" name="q7" value="non"> Non</label>
                </div>

                <!-- Q8 -->
                <div class="question" id="bloc-q8">
                    <p>8. Serez-vous dans un endroit calme et silencieux lors de la téléconsultation ?</p>
                    <label><input type="radio" name="q8" value="oui"> Oui</label>
                    <label><input type="radio" name="q8" value="non"> Non</label>
                </div>

                <p id="resultat" style="font-weight:bold; margin-top:20px;"></p>

                <!-- Bouton RESET uniquement -->
                <button type="reset" class="button" style="background: var(--button-bg); margin-left:10px;"
                    onclick="reinitialiserFormulaire();">
                    Effacer mes réponses
                </button>

                <div class="centered" id="btn-doctolib" style="display:none;">
                    <a href="https://www.doctolib.fr/cabinet-medical/echirolles/cabinet-d-anesthesie-des-cedres"
                       target="_blank" rel="noopener noreferrer"
                       class="button">
                        Retour vers Doctolib pour prendre rendez-vous
                    </a>
                </div>

            </form>
        </section>

        <script>
        function evalQuestions() {
            const blocIds = [
                'bloc-q1','bloc-q2','bloc-q3',
                'bloc-q4','bloc-q5','bloc-q6',
                'bloc-q7','bloc-q8'
            ];

            // Tout cacher sauf Q1, on va ensuite dévoiler au fur et à mesure
            blocIds.forEach((id, index) => {
                const el = document.getElementById(id);
                if (!el) return;
                if (index === 0) {
                    el.style.display = 'block'; // Q1
                } else {
                    el.style.display = 'none';
                }
            });

            const zoneResultat = document.getElementById("resultat");
            const boutonDoctolib = document.getElementById("btn-doctolib");
            zoneResultat.textContent = "";
            zoneResultat.style.color = "";
            boutonDoctolib.style.display = "none";

            // Récupération des réponses
            const r1 = document.querySelector('input[name="q1"]:checked'); // >70 ans
            const selectInterv = document.getElementById('q3');            // intervention (q3)
            const r2 = document.querySelector('input[name="q2"]:checked'); // mineur
            const r4 = document.querySelector('input[name="q4"]:checked'); // anticoagulant
            const r5 = document.querySelector('input[name="q5"]:checked'); // visio
            const r6 = document.querySelector('input[name="q6"]:checked'); // webcam
            const r7 = document.querySelector('input[name="q7"]:checked'); // micro
            const r8 = document.querySelector('input[name="q8"]:checked'); // calme

            let impossible = false;

            // Étape 1 : Q1
            if (r1) {
                if (r1.value === "oui") {
                    impossible = true;
                } else {
                    // Q1 = non -> on peut montrer Q2
                    const b2 = document.getElementById('bloc-q2');
                    if (b2) b2.style.display = 'block';
                }
            }

            // Étape 2 : Q2 (intervention)
            let interventionValide = false;
            if (!impossible && r1 && r1.value === "non") {
                if (selectInterv && selectInterv.value !== "") {
                    if (selectInterv.value !== "autre") {
                        // Intervention dans la liste => pas éligible
                        impossible = true;
                    } else {
                        // Mon intervention n'est pas dans cette liste
                        interventionValide = true;
                        const b3 = document.getElementById('bloc-q3');
                        if (b3) b3.style.display = 'block';
                    }
                }
            }

            // Étape 3 : Q3 (mineur)
            if (!impossible && r1 && r1.value === "non" && interventionValide) {
                if (r2) {
                    if (r2.value === "oui") {
                        impossible = true;
                    } else {
                        // majeur => on peut afficher Q4
                        const b4 = document.getElementById('bloc-q4');
                        if (b4) b4.style.display = 'block';
                    }
                }
            }

            // Étape 4 : Q4 (anticoagulants)
            if (!impossible && r1 && r1.value === "non" && interventionValide && r2 && r2.value === "non") {
                if (r4) {
                    if (r4.value === "oui") {
                        impossible = true;
                    } else {
                        const b5 = document.getElementById('bloc-q5');
                        if (b5) b5.style.display = 'block';
                    }
                }
            }

            // Étape 5 : Q5 (connexion visio)
            if (!impossible && r1 && r1.value === "non" && interventionValide && r2 && r2.value === "non" && r4 && r4.value === "non") {
                if (r5) {
                    if (r5.value === "non") {
                        impossible = true;
                    } else {
                        const b6 = document.getElementById('bloc-q6');
                        if (b6) b6.style.display = 'block';
                    }
                }
            }

            // Étape 6 : Q6 (webcam)
            if (!impossible && r1 && r1.value === "non" && interventionValide && r2 && r2.value === "non" && r4 && r4.value === "non" && r5 && r5.value === "oui") {
                if (r6) {
                    if (r6.value === "non") {
                        impossible = true;
                    } else {
                        const b7 = document.getElementById('bloc-q7');
                        if (b7) b7.style.display = 'block';
                    }
                }
            }

            // Étape 7 : Q7 (micro)
            if (!impossible && r1 && r1.value === "non" && interventionValide && r2 && r2.value === "non" && r4 && r4.value === "non" && r5 && r5.value === "oui" && r6 && r6.value === "oui") {
                if (r7) {
                    if (r7.value === "non") {
                        impossible = true;
                    } else {
                        const b8 = document.getElementById('bloc-q8');
                        if (b8) b8.style.display = 'block';
                    }
                }
            }

            // Étape 8 : Q8 (calme)
            if (!impossible && r1 && r1.value === "non" && interventionValide &&
                r2 && r2.value === "non" &&
                r4 && r4.value === "non" &&
                r5 && r5.value === "oui" &&
                r6 && r6.value === "oui" &&
                r7 && r7.value === "oui") {

                if (r8) {
                    if (r8.value === "non") {
                        impossible = true;
                    } else {
                        // TOUTES les conditions sont remplies => C'EST POSSIBLE
                        zoneResultat.style.color = "green";
                        zoneResultat.innerHTML =
                            "C’EST POSSIBLE POUR VOUS, prenez rendez-vous sur Doctolib en sélectionnant Téléconsultation.<br><br>" +
                            "<div class='encadre'>" +
                                "<div class='titre-encadre'>A lire avant votre téléconsultation</div>" +
                                "<div class='texte-encadre'>" +
                                "Dans des cas très rares il est possible que lors de la Téléconsultation le médecin anesthésiste " +
                                "constate que votre état de santé nécessite de vous voir en présentiel et que la Téléconsultation " +
                                "ne soit en fait pas possible pour vous. Dans ces rares situations une consultation présentielle " +
                                "devra alors être programmée.<br><br>" +
                                "Pensez à mettre avant la Téléconsultation sur Doctolib vos ordonnances, compte rendus de consultations " +
                                "spécialisées notamment de cardiologie et le questionnaire d'anesthésie." +
                                "</div>" +
                            "</div>";
                        boutonDoctolib.style.display = "block";
                        return;
                    }
                }
            }

            // Si une réponse rend la téléconsultation impossible à n'importe quel moment
            if (impossible) {
                zoneResultat.style.color = "red";
                zoneResultat.textContent =
                    "CE N'EST PAS POSSIBLE pour vous, merci de prendre rendez-vous en présentiel.";
                boutonDoctolib.style.display = "block";
            }
        }

        function reinitialiserFormulaire() {
            const zoneResultat = document.getElementById("resultat");
            const boutonDoctolib = document.getElementById("btn-doctolib");
            zoneResultat.innerHTML = '';
            zoneResultat.style.color = '';
            boutonDoctolib.style.display = 'none';

            // Laisse le reset du navigateur vider les réponses, puis réévalue l'affichage
            setTimeout(evalQuestions, 0);
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Au chargement : initialiser l'affichage
            evalQuestions();

            // Ajout des écouteurs sur toutes les entrées pour évaluer en direct
            const inputs = document.querySelectorAll('input[type="radio"]');
            inputs.forEach(input => {
                input.addEventListener('change', evalQuestions);
            });

            const selectQ3 = document.getElementById('q3');
            if (selectQ3) {
                selectQ3.addEventListener('change', evalQuestions);
            }
        });
        </script>
    </main>
</body>
</html>
